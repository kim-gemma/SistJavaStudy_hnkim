<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #out{
            position: absolute;
            top: 50px;
            left:50px;
            width: 300px;
            height: 200px;
            padding: 10px;
            background-color: #ffc;
            font-size: 11pt;
        }
        #outimg{
            position: absolute;
            top: 100px;
            left: 400px;
            width: 100px;
            height: 120px;
            border: 1px solid gray;
        }
    </style>
</head>
    <script>
        //콜백 = 나중에 호출해달라고 미리 전달해두는 함수
        /* **콜백(callback)**은
        **“지금 당장 실행하는 함수가 아니라, 어떤 시점이나 조건이 되었을 때 나중에 호출되는 함수”**를 말해.*/
        //이벤트 번호 확인 ENTER는 13번
        // document.addEventListener("keydown", function(e){
        //     console.log('!!!!!!!!',e.keyCode);
        // })

        //숫자맞추기
        var rnd;
        var cnt = 0;
        var out;
         
        //var out = document.getElementById("out"); // ← 문제 발생
        /*브라우저는 위에서 아래로 읽는다.
        <script> 태그를 만나면 바로 JS 실행
        하지만 <div id="out">는 아직 오지 않았음 (아래에 있음)
        그래서 document.getElementById("out")를 실행해도
        DOM에 없는 요소 → null 반환
        이후 out.innerHTML을 실행하니 오류 발생*/

        window.onload = function(){
            rnd = parseInt(Math.random() * 100) + 1;  
            out = document.getElementById("out");
            // document.write 제거 (문제 원인)
            console.log("정답(테스트용):", rnd);
        }


        function check(su){
            if(su<=0 || su>100 ){
                alert("다시 입력바랍니다");
            }
            //난수와 숫자비교해서 결과 출력
           cnt++;
           if(su>rnd){
            out.innerHTML += cnt+"회: " + su+ "보다 작습니다 <br>";
           }
           else if(su <rnd){
            out.innerHTML += cnt+"회: " +su+ "보다 큽니다<br>";
           }
           else {
            out.innerHTML="<h3>축하합니다 정답은"+rnd+"입니다</h4>";
            myimg.src="../image/jquery_img/03.png";
           }
        }

        //숫자를 횟수동안 못맞출시
        if(cnt>=10){
            out.innerHTML="<h3>다음기회에</h4>";
            myimg.src="../image/jquery_img/03.png";
        }

    </script>
<body>
    <div class="input">
        <form action="#" name="frm" onsubmit="return false">
            <b>숫자: </b>
            <input type="text" name="num" size="5" onkeydown="if(event.keyCode==13){ check(this.value); return false; }">
        </form>
    </div>
    <div id="out"></div>
    <div id="outimg">
        <img src="" alt="" name="myimg">
    </div>

</body>
</html>